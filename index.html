<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>rov.bios</title>
    <link rel="icon" type="image/x-icon" href="src/mewo.webp">
	<link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <div id="overlay">
        <div style="color:black; letter-spacing:2px; font-weight: bolder;">START</div>
    </div>

    <div id="fade-overlay"></div>

    <div id="boot-container">
        <div id="boot-text">Lorem ipsum dolor</div>
    </div>

    <div id="menu" style="display:none;">
            <div class="menu-item">Browser</div>
        <div class="menu-item">System Configuration</div>
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
    import * as THREE from 'three';
    import { initBootScreen } from './boot.js';
    import { initMainMenu } from './main.js';
    import { initBrowser } from './browser.js';

    // Create ONE renderer for the entire lifecycle
    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(window.devicePixelRatio);
    // This stops the renderer from trying to be "clever" with texture memory
    renderer.debug.checkShaderErrors = false; 

    const overlay = document.getElementById('overlay');
    overlay.addEventListener('click', () => {
        overlay.style.display = 'none';
        
        // Pass the shared renderer to each scene
        // document.getElementById('boot-container').remove();
        // initBrowser(renderer);
        
        initBootScreen(renderer, () => {
            document.getElementById('boot-container').remove();
            document.getElementById('menu').style.display = 'block';
            initMainMenu(renderer);
        });
        
    });
</script>
</body>

</html>